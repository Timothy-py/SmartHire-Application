<% if(message.length > 0) { %>
	<div class="alert alert-success" style="margin:auto"><%= message %></div>
<% } %>



<% if ((role_name == 'Manager')) { %>
	
	<% if (skillpool == 'no skillpool') { %>
		
		<div class="kt-portlet__head-label" style="padding-left:12px;">
				<h3 class="kt-portlet__head-title">
					There is no Skillpool for your department yet
				</h3><br>
				<!--SKILLPOOL CREATE BUTTON-->
				<div class="kt-portlet__head-toolbar">
				<div class="kt-portlet__head-wrapper">
					<a href="#" class="btn btn-brand btn-bold btn-upper btn-font-sm" data-toggle="modal" data-target="#createSkillpool">
						<i class="la la-plus"></i>
						Create Skillpool
					</a>
					<!-- Modal -->
					<div class="modal fade" id="createSkillpool" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
						<div class="modal-dialog" role="document">
							
							<form name="createSkillpool" id="createSkillpool" action="./skillpool/create" method="POST" onsubmit="return validateForm()">
								
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="exampleModalLabel">Skillpool</h5>
								</div>
								<div class="modal-body">
									<label for="skillpoolName">Name:</label><br>
									<input type="text" id="skillpoolName" name="skillpoolName" value=""><br>
								</div>
								<div class="modal-footer">
									<input type="submit" class="btn btn-outline-brand" value="Create">
									<button type="button" class="btn btn-outline-brand" data-dismiss="modal">Cancel</button>
								</div>
							</div>
								
							</form>
							
						</div>
					</div>
				</div>
			</div>
		</div>
	
	<% } else { %>
		
		<div class="kt-container  kt-container--fluid  kt-grid__item kt-grid__item--fluid">

	<div class="kt-portlet kt-portlet--mobile">
		<div class="kt-portlet__head kt-portlet__head--lg">
			<div class="kt-portlet__head-label">
				<h3 class="kt-portlet__head-title">
					<a href="./skillpool/<%= skillpoolId %>/delete" class="btn btn-danger btn-bold btn-upper btn-font-sm">
						<i class="la la-minus"></i>
						Delete Skillpool
					</a>
				</h3>
			</div>

			<div class="kt-portlet__head-toolbar">
				<div class="kt-portlet__head-wrapper">
					<a href="#" class="btn btn-brand btn-bold btn-upper btn-font-sm" data-toggle="modal" data-target="#createExpense">
						<i class="la la-plus"></i>
						Create Skill
					</a>
					<!-- Modal -->
					<div class="modal fade" id="createExpense" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
						<div class="modal-dialog" role="document">
							
							<form name="createSkill" class="px-8 py-8" id="createSkill" action="./skill/createapi" method="POST" onsubmit="return validateForm1()">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="exampleModalLabel">Skill</h5>
								</div>
								<div class="modal-body form-group">
									<label for="skillName">Name:</label><br>
									<input class="form-control col-7" type="text" id="skillName" name="skillName" value=""><br>
									
									<label for="dept_rank">Rank:</label><br>
									 <input class="form-control col-2" type="number" id="dept_rank" name="dept_rank" min="1" max="10"><br>
								</div>
								<div class="modal-footer">
									<input type="submit" class="btn btn-outline-primary" value="Create">
									<button type="button" class="btn btn-outline-danger" data-dismiss="modal">Cancel</button>
								</div>
							</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<div class="kt-portlet__body">

		<% if (skillpool == 'no skill') { %>	
			
			<div class="kt-portlet__head-label" style="padding-left:12px;">
				<h3 class="kt-portlet__head-title">
					There are no skills for this Department yet
				</h3><br>
			</div>
			
		<% } else { %>
			
				<div class="kt-portlet__head-label">
				<h3 class="kt-portlet__head-title">
					<%= skillpool[0].skillpool.skillpoolName %>
				</h3>
			</div>
			<!--begin: Datatable -->
			
			<table class="table table-striped- table-bordered table-hover table-checkable" id="kt_table_1">
			<thead>
				<tr>
					<th>Name</th>
					<th>Department Rank</th>
					<th>Actions</th>
				</tr>
			</thead>
			<tbody>
				<% skillpool.forEach(function(skill) { %>
				<tr>
					<form action="./skill/<%= skill.id %>/updateapi" method="POST">
					<td>
						<input type="text" id="skillName" name="skillName" value="<%= skill.skillName %>"><br>
					</td>
					
					<td>
						 <input type="number" id="skillName" name="dept_rank" min="1" max="10" value="<%= skill.dept_rank %>"><br>
					</td>
					
					<td nowrap> 
						  <button type="submit" class="btn btn-sm btn-clean btn-icon btn-icon-md" title="Update Skill">
							<i class="la la-edit"></i>
						</button>
						</form>
						<a href="./skill/<%= skill.id %>/delete" class="btn btn-sm btn-clean btn-icon btn-icon-md" title="Remove Skill">
							<i class="la la-trash"></i>
						</a>
					</td>
				<% }); %>
				
			</tbody>
		</table>

		<!--end: Datatable -->
		
			
		<% } %>
			
		</div>
	</div>
</div>
	
	<% } %>
	
	
	
	<!--MAIN ELSE-->
<% } else { %>
	
	<% if (skillpool == 'no skillpool') { %>
	
		<div class="kt-portlet__head-label">
				<h3 class="kt-portlet__head-title">
					There is no Skillpool for your department yet
				</h3><br>
		</div>
		
	<% } else { %>
		
		<% if (skillpool=='no skill') { %>	
			
			<div class="kt-portlet__head-label">
				<h3 class="kt-portlet__head-title">
					There are no skills for this Department yet
				</h3><br>
			</div>
			
			
		<% } else { %>
		
			
			<div class="kt-container  kt-container--fluid  kt-grid__item kt-grid__item--fluid">

	<div class="kt-portlet kt-portlet--mobile">

		<div class="kt-portlet__body">
		
					<!--begin: Datatable -->
					
					<table class="table table-striped- table-bordered table-hover table-checkable" id="kt_table_1">
						<thead>
							<tr>
								<th>Name</th>
								<th>Department Rank</th>
							</tr>
						</thead>
						<tbody>
							<% skillpool.forEach(function(skill) { %>
							<tr>
								<td>
									<%= skill.skillName %>
								</td>
								
								<td>
									 <%= skill.dept_rank %>
								</td>
								
							<% }); %>
							
						</tbody>
					</table>
		
					<!--end: Datatable -->
				</div>
		</div>
				
		</div>
		
		<% } %>
	

<% } %>

<% } %>


<script>
function validateForm() {
  var x = document.forms["createSkillpool"]["skillpoolName"].value;
  if ((x) == "") {
		Swal.fire({
	  icon: 'error',
	  title: 'Oops...',
	  text: 'Name must be filled out!',
	})
    return false;
  }else if(x.length < 3){
  	Swal.fire({
	  icon: 'error',
	  title: 'Oops...',
	  text: 'Name too short!',
	})
    return false;
  }
  
}


function validateForm1() {
  var x = document.forms["createSkill"]["skillName"].value;
  var y = document.forms["createSkill"]["dept_rank"].value;
  if (x == "") {
		Swal.fire({
	  icon: 'error',
	  title: 'Oops...',
	  text: 'Name must be filled out!',
	})
    return false;
  }else if(y == ""){
  	Swal.fire({
	  icon: 'error',
	  title: 'Oops...',
	  text: 'Rank cannot be empty!',
	})
    return false;
  }
  
}
</script>



